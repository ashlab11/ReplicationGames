{
  "hash": "9b5c40763d5a723b66a466b570869708",
  "result": {
    "markdown": "# Robustness checking and exploration {#robustness}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Input cleaned data\"}\nlibrary(pacman)\np_load(tidyverse, data.table, haven, glue, Hmisc, here, fixest, knitr, kableExtra)\n\nrm(list=ls())\ngc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          used (Mb) gc trigger  (Mb) limit (Mb) max used (Mb)\nNcells 1189471 63.6    2353322 125.7         NA  1691092 90.4\nVcells 2008778 15.4    8388608  64.0      32768  2750556 21.0\n```\n:::\n\n```{.r .cell-code  code-summary=\"Input cleaned data\"}\n# read in dta file, Clara likes working with data table format\nsurvey = read_dta(here::here(\"OriginalFiles\", \"Survey.dta\"))\ndts = read_dta(here::here(\"OriginalFiles\", \"Replication_Dataset.dta\")) %>% data.table()\n```\n:::\n\n\n\n\nWe proposed a range of robustness tests. We were able to do a subset of these.\n\n## Rates of voting for each car group split: implication for identification\n\nWe [aimed to] present a simple comparison of the Lega voting rates, voting changes, and other outcomes by each car-ownership group. (see below on functional forms)\n\n## Main results (table 2, recoded)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Table 2 recoded\"}\n# Table 2 ------\n\n# Keep the same choices made by the authors\nlibrary(fixest)\n\nmod1 = feols(vote_lega_euro ~ dummy_diesel + dummy_euro_4 + dummy_diesel*dummy_euro_4, \n             data = dts[target!=3 & target!=4 & no_answer_euro==0, ])\n\nmod2 = feols(vote_lega_euro ~ dummy_diesel + dummy_euro_4 + dummy_diesel*dummy_euro_4\n             + age + as.factor(female) | EDU1 + EDU2 + EDU3 + EDU4 + profile_gross_personal_eu, \n             data = dts[target!=3 & target!=4 & no_answer_euro==0, ],\n             vcov = \"hetero\")\n\nmod3 = feols(vote_lega_euro ~ dummy_diesel_ass + dummy_euro_4_ass + diesel_euro4_ass\n             + age + female + dummy_car_unknown | EDU1 + EDU2 + EDU3 + EDU4 + profile_gross_personal_eu, \n             data = dts[target!=3 & no_answer_euro==0, ],\n             vcov = \"hetero\")\n\nmod4 = feols(vote_lega_euro ~ dummy_diesel + dummy_euro_4 + dummy_diesel*dummy_euro_4\n             + age + female + vote_lega_2018 | EDU1 + EDU2 + EDU3 + EDU4 + profile_gross_personal_eu, \n             data = dts[target!=3 & target!=4 & no_answer_euro==0 & no_answer_2018==0, ],\n             vcov = \"hetero\")\n\nmod5 = feols(vote_lega_euro ~ dummy_diesel + dummy_euro_4 + dummy_diesel*dummy_euro_4\n             + age + female + vote_lega_regional | EDU1 + EDU2 + EDU3 + EDU4 + profile_gross_personal_eu, \n             data = dts[target!=3 & target!=4 & no_answer_euro==0 & no_answer_regional==0, ],\n             vcov = \"hetero\")\n\nmod6 = feols(vote_lega_euro ~ dummy_diesel + dummy_euro_4 + dummy_diesel*dummy_euro_4\n             + age + female + vote_lega_municipal | EDU1 + EDU2 + EDU3 + EDU4 + profile_gross_personal_eu, \n             data = dts[target!=3 & target!=4 & no_answer_euro==0 & no_answer_municipal==0, ],\n             vcov = \"hetero\")\n\n# Save\netable(mod1,mod2,mod3,mod4,mod5,mod6,\n       keep = c(\"dummy_diesel\", \"dummy_euro_4\", \"diesel_euro4\")) %>%\n  kable(format = \"html\", escape = FALSE) %>%\n      kable_styling\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">  </th>\n   <th style=\"text-align:left;\"> mod1 </th>\n   <th style=\"text-align:left;\"> mod2 </th>\n   <th style=\"text-align:left;\"> mod3 </th>\n   <th style=\"text-align:left;\"> mod4 </th>\n   <th style=\"text-align:left;\"> mod5 </th>\n   <th style=\"text-align:left;\"> mod6 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Dependent Var.: </td>\n   <td style=\"text-align:left;\"> vote_lega_euro </td>\n   <td style=\"text-align:left;\"> vote_lega_euro </td>\n   <td style=\"text-align:left;\"> vote_lega_euro </td>\n   <td style=\"text-align:left;\"> vote_lega_euro </td>\n   <td style=\"text-align:left;\"> vote_lega_euro </td>\n   <td style=\"text-align:left;\"> vote_lega_euro </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dummy_diesel </td>\n   <td style=\"text-align:left;\"> -0.0932 (0.0575) </td>\n   <td style=\"text-align:left;\"> -0.1049. (0.0570) </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> -0.0237 (0.0365) </td>\n   <td style=\"text-align:left;\"> 0.0033 (0.0402) </td>\n   <td style=\"text-align:left;\"> -0.0007 (0.0487) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dummy_euro_4 </td>\n   <td style=\"text-align:left;\"> -0.0478 (0.0579) </td>\n   <td style=\"text-align:left;\"> -0.0481 (0.0595) </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> 0.0066 (0.0333) </td>\n   <td style=\"text-align:left;\"> 0.0263 (0.0364) </td>\n   <td style=\"text-align:left;\"> -0.0278 (0.0428) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dummy_diesel x dummy_euro_4 </td>\n   <td style=\"text-align:left;\"> 0.1195 (0.0768) </td>\n   <td style=\"text-align:left;\"> 0.1830* (0.0787) </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> 0.1148* (0.0468) </td>\n   <td style=\"text-align:left;\"> 0.0942. (0.0518) </td>\n   <td style=\"text-align:left;\"> 0.1456* (0.0601) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dummy_diesel_ass </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> -0.0819 (0.0553) </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dummy_euro_4_ass </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> -0.0195 (0.0592) </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> diesel_euro4_ass </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> 0.1544* (0.0780) </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Fixed-Effects: </td>\n   <td style=\"text-align:left;\"> ---------------- </td>\n   <td style=\"text-align:left;\"> ----------------- </td>\n   <td style=\"text-align:left;\"> ---------------- </td>\n   <td style=\"text-align:left;\"> ---------------- </td>\n   <td style=\"text-align:left;\"> ---------------- </td>\n   <td style=\"text-align:left;\"> ---------------- </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> EDU1 </td>\n   <td style=\"text-align:left;\"> No </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> EDU2 </td>\n   <td style=\"text-align:left;\"> No </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> EDU3 </td>\n   <td style=\"text-align:left;\"> No </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> EDU4 </td>\n   <td style=\"text-align:left;\"> No </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> profile_gross_personal_eu </td>\n   <td style=\"text-align:left;\"> No </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n   <td style=\"text-align:left;\"> Yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ___________________________ </td>\n   <td style=\"text-align:left;\"> ________________ </td>\n   <td style=\"text-align:left;\"> _________________ </td>\n   <td style=\"text-align:left;\"> ________________ </td>\n   <td style=\"text-align:left;\"> ________________ </td>\n   <td style=\"text-align:left;\"> ________________ </td>\n   <td style=\"text-align:left;\"> ________________ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> S.E. type </td>\n   <td style=\"text-align:left;\"> IID </td>\n   <td style=\"text-align:left;\"> Heteroskeda.-rob. </td>\n   <td style=\"text-align:left;\"> Heterosked.-rob. </td>\n   <td style=\"text-align:left;\"> Heterosked.-rob. </td>\n   <td style=\"text-align:left;\"> Heterosked.-rob. </td>\n   <td style=\"text-align:left;\"> Heterosked.-rob. </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Observations </td>\n   <td style=\"text-align:left;\"> 602 </td>\n   <td style=\"text-align:left;\"> 602 </td>\n   <td style=\"text-align:left;\"> 665 </td>\n   <td style=\"text-align:left;\"> 583 </td>\n   <td style=\"text-align:left;\"> 551 </td>\n   <td style=\"text-align:left;\"> 533 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> R2 </td>\n   <td style=\"text-align:left;\"> 0.00499 </td>\n   <td style=\"text-align:left;\"> 0.13011 </td>\n   <td style=\"text-align:left;\"> 0.15288 </td>\n   <td style=\"text-align:left;\"> 0.60097 </td>\n   <td style=\"text-align:left;\"> 0.57668 </td>\n   <td style=\"text-align:left;\"> 0.49357 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Within R2 </td>\n   <td style=\"text-align:left;\"> -- </td>\n   <td style=\"text-align:left;\"> 0.05339 </td>\n   <td style=\"text-align:left;\"> 0.06408 </td>\n   <td style=\"text-align:left;\"> 0.56532 </td>\n   <td style=\"text-align:left;\"> 0.53752 </td>\n   <td style=\"text-align:left;\"> 0.44663 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Alternate control/treatment splits\n\nI don't think we did this\n\n## Functional form {#functional}\n\nThe main outcome variable is binary 0/1. The authors consider linear models throughout. I (David Reinstein) believe their identification implicitly depends on\n\n-   each of the unmeasured underlying characteristics (picked up by the proxy control in 'difference') each being associated with the voting outcome linearly on 'percentage point voting for Lega' ... so the each the\n\nBut the treated and groups might have started from a different baseline level of voting for Lega (check this)\n\nIf the true model is nonlinear (e.g., proportional, or with ceiling effects), the results here may be misleading. E.g., suppose the true effect of the policy on voting was the same for each car-ownership group as a percentage of the initial vote. Inappropriately estimating a linear model would find a substantial 'difference in difference' between these groups, even though the effect did not interact with car ownership itself.\n\n@chen_roth cite Wooldridge 2023 \n\n> An alternative identifying assumption is to impose that, in the absence of treatment, the percentage changes in the mean would have been the same for the treated and control group. As in Wooldridge (2023), this can be formalized using a “ratio” version of the parallel trends assumption,\n\n\\[\n\\frac{E[Y_{it}(0) | D_i = 1, Post_t = 1]}{E[Y_{it}(0) | D_i = 1, Post_t = 0]} = \\frac{E[Y_{it}(0) | D_i = 0, Post_t = 1]}{E[Y_{it}(0) | D_i = 0, Post_t = 0]}\n\\]\n\nWe probably don't have time to test for proportional trends (as well as limited data for a powerful test). But it seems an equally-plausible model off-the cuff. Chen and Roth offer an estimation strategy \n\n\n> Conveniently, this estimate can also be obtained using Poisson QMLE to estimate  $Y_{it} = \\exp(\\beta_0 + D_i \\times Post_t \\beta_1 + D_i\\beta_2 + Post_t\\beta_3)\\epsilon_{it}$ \n\n> and then computing $\\hat{\\theta}_{ATT\\%} = \\exp(\\hat{\\beta}_1) - 1 = -0.82$ as shown in column (1) of Table 6.\n\nEstimate this as a logit model? Other specifications like proportional hazards? [Roth recommends Quasi-poisson](https://www.jonathandroth.com/assets/files/LogUniqueHOD0_Draft_Accepted.pdf#page=25.45) See section 5.2, \"A DiD setting: Sequeira (2016)\"\n\nWe re-ran the model as a Poisson model. Results were qualitatively similar at a glance. \n\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "robustness_checking_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}