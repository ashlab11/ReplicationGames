<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.113">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Replication game notebook: Colantone et al (2024) - 2&nbsp; Robustness checking and exploration</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: 1;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/writeup.html" rel="next">
<link href="../chapters/computational_replication_checking.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script async="" src="https://hypothes.is/embed.js"></script><script src="../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.28/datatables.js"></script><script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Robustness checking and exploration</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Replication game notebook: Colantone et al (2024)</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/computational_replication_checking.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Computational replication</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/robustness_checking.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Robustness checking and exploration</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/writeup.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">A comment on Colantone et al.&nbsp;(2024, APSR)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#rates-of-voting-for-each-car-group-split-implication-for-identification" id="toc-rates-of-voting-for-each-car-group-split-implication-for-identification" class="nav-link active" data-scroll-target="#rates-of-voting-for-each-car-group-split-implication-for-identification"><span class="toc-section-number">2.1</span>  Rates of voting for each car group split: implication for identification</a></li>
  <li><a href="#main-results-table-2-recoded" id="toc-main-results-table-2-recoded" class="nav-link" data-scroll-target="#main-results-table-2-recoded"><span class="toc-section-number">2.2</span>  Main results (table 2, recoded)</a></li>
  <li><a href="#alternate-controltreatment-splits" id="toc-alternate-controltreatment-splits" class="nav-link" data-scroll-target="#alternate-controltreatment-splits"><span class="toc-section-number">2.3</span>  Alternate control/treatment splits</a></li>
  <li><a href="#functional" id="toc-functional" class="nav-link" data-scroll-target="#functional"><span class="toc-section-number">2.4</span>  Functional form</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="robustness" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Robustness checking and exploration</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><div class="cell">
<details><summary>Input cleaned data</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/pacman">pacman</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">tidyverse</span>, <span class="va">data.table</span>, <span class="va">haven</span>, <span class="va">glue</span>, <span class="va">Hmisc</span>, <span class="va">here</span>, <span class="va">fixest</span>, <span class="va">knitr</span>, <span class="va">kableExtra</span>, <span class="va">DT</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/gc.html">gc</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>          used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)
Ncells 1191878 63.7    2357902  126         NA  1754165 93.7
Vcells 2013691 15.4    8388608   64      32768  2818562 21.6</code></pre>
</div>
<details><summary>Input cleaned data</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># read in dta file, Clara likes working with data table format</span></span>
<span><span class="va">survey</span> <span class="op">=</span> <span class="fu">read_dta</span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"OriginalFiles"</span>, <span class="st">"Survey.dta"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dts</span> <span class="op">=</span> <span class="fu">read_dta</span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"OriginalFiles"</span>, <span class="st">"Replication_Dataset.dta"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">data.table</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dts</span> <span class="op">&lt;-</span> <span class="va">dts</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    euro_class <span class="op">=</span> <span class="va">class</span><span class="op">-</span><span class="fl">1</span>,</span>
<span>    diesel <span class="op">=</span> <span class="va">fuel</span> <span class="op">==</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We proposed a range of robustness tests. We were able to do a subset of these.</p>
<section id="rates-of-voting-for-each-car-group-split-implication-for-identification" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="rates-of-voting-for-each-car-group-split-implication-for-identification">
<span class="header-section-number">2.1</span> Rates of voting for each car group split: implication for identification</h2>
<p>We present a simple comparison of the Lega voting rates, voting changes, and other outcomes by each car-ownership group. The table below captures the ‘main effect’ the authors investigate. Euro 4 <em>diesel</em> fuel owners supported Lega more in the post-policy European elections, relative to Euro 4 <em>gas</em> owners. This also held for <em>Euro 4</em> diesel fuel owners relative to diesel fuel owners in other classes. However, for these same comparisons in an earlier (2018) election, the rates of voting for Lega were fairly similar, or even went in the opposite direction. The second table below enables sorting by diesel or class, to aid this consideration.</p>
<p>Furthermore, the base rates of Lega voting were similar in order-of-magnitude, suggesting that the choice of functional form might not matter so much (see discussion below).</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Assuming dts is your data frame</span></span>
<span><span class="va">dts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">euro_class</span>, <span class="va">diesel</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mn_lega_18 <span class="op">=</span> <span class="kw">if</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">50</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">vote_lega_2018</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="kw">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span>    mn_lega_euro <span class="op">=</span> <span class="kw">if</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">50</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">vote_lega_euro</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="kw">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span>    count <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>, <span class="co"># Count of observations</span></span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span> <span class="co"># Drop grouping structure after summarization</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">mn_lega_18</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># Remove groups with less than 10 observations</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Voting for Lega by Euro category and fuel tyle"</span>, format <span class="op">=</span> <span class="st">"html"</span>, escape <span class="op">=</span> <span class="cn">FALSE</span>, digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>      <span class="va">kable_styling</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>Voting for Lega by Euro category and fuel tyle</caption>
 <thead><tr>
<th style="text-align:right;"> euro_class </th>
   <th style="text-align:left;"> diesel </th>
   <th style="text-align:right;"> mn_lega_18 </th>
   <th style="text-align:right;"> mn_lega_euro </th>
   <th style="text-align:right;"> count </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:right;"> 4 </td>
   <td style="text-align:left;"> FALSE </td>
   <td style="text-align:right;"> 0.12 </td>
   <td style="text-align:right;"> 0.18 </td>
   <td style="text-align:right;"> 122 </td>
  </tr>
<tr>
<td style="text-align:right;"> 4 </td>
   <td style="text-align:left;"> TRUE </td>
   <td style="text-align:right;"> 0.13 </td>
   <td style="text-align:right;"> 0.24 </td>
   <td style="text-align:right;"> 293 </td>
  </tr>
<tr>
<td style="text-align:right;"> 5 </td>
   <td style="text-align:left;"> FALSE </td>
   <td style="text-align:right;"> 0.19 </td>
   <td style="text-align:right;"> 0.22 </td>
   <td style="text-align:right;"> 171 </td>
  </tr>
<tr>
<td style="text-align:right;"> 5 </td>
   <td style="text-align:left;"> TRUE </td>
   <td style="text-align:right;"> 0.14 </td>
   <td style="text-align:right;"> 0.15 </td>
   <td style="text-align:right;"> 120 </td>
  </tr>
<tr>
<td style="text-align:right;"> 6 </td>
   <td style="text-align:left;"> FALSE </td>
   <td style="text-align:right;"> 0.19 </td>
   <td style="text-align:right;"> 0.24 </td>
   <td style="text-align:right;"> 170 </td>
  </tr>
<tr>
<td style="text-align:right;"> 6 </td>
   <td style="text-align:left;"> TRUE </td>
   <td style="text-align:right;"> 0.17 </td>
   <td style="text-align:right;"> 0.17 </td>
   <td style="text-align:right;"> 133 </td>
  </tr>
<tr>
<td style="text-align:right;"> 998 </td>
   <td style="text-align:left;"> FALSE </td>
   <td style="text-align:right;"> 0.49 </td>
   <td style="text-align:right;"> 0.51 </td>
   <td style="text-align:right;"> 55 </td>
  </tr>
</tbody>
</table>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">euro_class</span>, <span class="va">diesel</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mn_lega_18 <span class="op">=</span> <span class="kw">if</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">50</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">vote_lega_2018</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="kw">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span>    mn_lega_euro <span class="op">=</span> <span class="kw">if</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">50</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">vote_lega_euro</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="kw">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span>    count <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>, <span class="co"># Count of observations</span></span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span> <span class="co"># Drop grouping structure after summarization</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">mn_lega_18</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># Remove groups with less than 10 observations</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># Round all numeric columns to 3 decimal places</span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-aa31e630687feed75852" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-aa31e630687feed75852">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7"],[4,4,5,5,6,6,998],[false,true,false,true,false,true,false],[0.123,0.133,0.187,0.142,0.194,0.165,0.491],[0.18,0.242,0.216,0.15,0.241,0.165,0.509],[122,293,171,120,170,133,55]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>euro_class<\/th>\n      <th>diesel<\/th>\n      <th>mn_lega_18<\/th>\n      <th>mn_lega_euro<\/th>\n      <th>count<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="main-results-table-2-recoded" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="main-results-table-2-recoded">
<span class="header-section-number">2.2</span> Main results (table 2, recoded)</h2>
<div class="cell">
<details><summary>Table 2 recoded</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Table 2 ------</span></span>
<span></span>
<span><span class="co"># Keep the same choices made by the authors</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lrberge.github.io/fixest/">fixest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod1</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod2</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">female</span><span class="op">)</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod3</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel_ass</span> <span class="op">+</span> <span class="va">dummy_euro_4_ass</span> <span class="op">+</span> <span class="va">diesel_euro4_ass</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">dummy_car_unknown</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod4</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">vote_lega_2018</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">no_answer_2018</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod5</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">vote_lega_regional</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">no_answer_regional</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod6</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">vote_lega_municipal</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">no_answer_municipal</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save</span></span>
<span><span class="fu"><a href="https://lrberge.github.io/fixest/reference/etable.html">etable</a></span><span class="op">(</span><span class="va">mod1</span>,<span class="va">mod2</span>,<span class="va">mod3</span>,<span class="va">mod4</span>,<span class="va">mod5</span>,<span class="va">mod6</span>,</span>
<span>       keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dummy_diesel"</span>, <span class="st">"dummy_euro_4"</span>, <span class="st">"diesel_euro4"</span><span class="op">)</span>,</span>
<span>  digits<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"html"</span>, escape <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>      <span class="va">kable_styling</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">  </th>
   <th style="text-align:left;"> mod1 </th>
   <th style="text-align:left;"> mod2 </th>
   <th style="text-align:left;"> mod3 </th>
   <th style="text-align:left;"> mod4 </th>
   <th style="text-align:left;"> mod5 </th>
   <th style="text-align:left;"> mod6 </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> Dependent Var.: </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
  </tr>
<tr>
<td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_diesel </td>
   <td style="text-align:left;"> -0.093 (0.058) </td>
   <td style="text-align:left;"> -0.105. (0.057) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> -0.024 (0.036) </td>
   <td style="text-align:left;"> 0.003 (0.040) </td>
   <td style="text-align:left;"> -0.0007 (0.049) </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_euro_4 </td>
   <td style="text-align:left;"> -0.048 (0.058) </td>
   <td style="text-align:left;"> -0.048 (0.059) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 0.007 (0.033) </td>
   <td style="text-align:left;"> 0.026 (0.036) </td>
   <td style="text-align:left;"> -0.028 (0.043) </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_diesel x dummy_euro_4 </td>
   <td style="text-align:left;"> 0.119 (0.077) </td>
   <td style="text-align:left;"> 0.183* (0.079) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 0.115* (0.047) </td>
   <td style="text-align:left;"> 0.094. (0.052) </td>
   <td style="text-align:left;"> 0.146* (0.060) </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_diesel_ass </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> -0.082 (0.055) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_euro_4_ass </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> -0.019 (0.059) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> diesel_euro4_ass </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 0.154* (0.078) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> Fixed-Effects: </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> --------------- </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> --------------- </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU1 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU2 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU3 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU4 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> profile_gross_personal_eu </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> ___________________________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> _______________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> _______________ </td>
  </tr>
<tr>
<td style="text-align:left;"> S.E. type </td>
   <td style="text-align:left;"> IID </td>
   <td style="text-align:left;"> Heteroske.-rob. </td>
   <td style="text-align:left;"> Heterosk.-rob. </td>
   <td style="text-align:left;"> Heterosk.-rob. </td>
   <td style="text-align:left;"> Heterosk.-rob. </td>
   <td style="text-align:left;"> Heteroske.-rob. </td>
  </tr>
<tr>
<td style="text-align:left;"> Observations </td>
   <td style="text-align:left;"> 602 </td>
   <td style="text-align:left;"> 602 </td>
   <td style="text-align:left;"> 665 </td>
   <td style="text-align:left;"> 583 </td>
   <td style="text-align:left;"> 551 </td>
   <td style="text-align:left;"> 533 </td>
  </tr>
<tr>
<td style="text-align:left;"> R2 </td>
   <td style="text-align:left;"> 0.00499 </td>
   <td style="text-align:left;"> 0.13011 </td>
   <td style="text-align:left;"> 0.15288 </td>
   <td style="text-align:left;"> 0.60097 </td>
   <td style="text-align:left;"> 0.57668 </td>
   <td style="text-align:left;"> 0.49357 </td>
  </tr>
<tr>
<td style="text-align:left;"> Within R2 </td>
   <td style="text-align:left;"> -- </td>
   <td style="text-align:left;"> 0.05339 </td>
   <td style="text-align:left;"> 0.06408 </td>
   <td style="text-align:left;"> 0.56532 </td>
   <td style="text-align:left;"> 0.53752 </td>
   <td style="text-align:left;"> 0.44663 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</section><section id="alternate-controltreatment-splits" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="alternate-controltreatment-splits">
<span class="header-section-number">2.3</span> Alternate control/treatment splits</h2>
<p>I don’t think we did this, but we could do. This seems to me like an important robustness check</p>
</section><section id="functional" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="functional">
<span class="header-section-number">2.4</span> Functional form</h2>
<p>The main outcome variable is binary 0/1. The authors consider linear models throughout. I (David Reinstein) believe their identification implicitly depends on</p>
<ul>
<li>each of the unmeasured underlying characteristics (picked up by the proxy control in ‘difference’) each being associated with the voting outcome linearly on ‘percentage point voting for Lega’ … so the each the</li>
</ul>
<p>But the treated and groups might have started from a different baseline level of voting for Lega – (however, as we saw above, these were order-of-magnitude similar).</p>
<p>If the true model is nonlinear (e.g., proportional, or with ceiling effects), the results here may be misleading. E.g., suppose the true effect of the policy on voting was the same for each car-ownership group as a percentage of the initial vote. Inappropriately estimating a linear model would find a substantial ‘difference in difference’ between these groups, even though the effect did not interact with car ownership itself.</p>
<p><span class="citation" data-cites="chen_roth">Chen and Roth (<a href="../references.html#ref-chen_roth" role="doc-biblioref">2023</a>)</span> cite Wooldridge 2023</p>
<blockquote class="blockquote">
<p>An alternative identifying assumption is to impose that, in the absence of treatment, the percentage changes in the mean would have been the same for the treated and control group. As in Wooldridge (2023), this can be formalized using a “ratio” version of the parallel trends assumption,</p>
</blockquote>
<p>[ = ]</p>
<p>We probably don’t have time to test for proportional trends (as well as limited data for a powerful test). But it seems an equally-plausible model off-the cuff. Chen and Roth offer an estimation strategy</p>
<blockquote class="blockquote">
<p>Conveniently, this estimate can also be obtained using Poisson QMLE to estimate <span class="math inline">\(Y_{it} = \exp(\beta_0 + D_i \times Post_t \beta_1 + D_i\beta_2 + Post_t\beta_3)\epsilon_{it}\)</span></p>
</blockquote>
<blockquote class="blockquote">
<p>and then computing <span class="math inline">\(\hat{\theta}_{ATT\%} = \exp(\hat{\beta}_1) - 1 = -0.82\)</span> as shown in column (1) of Table 6.</p>
</blockquote>
<p>Estimate this as a logit model? Other specifications like proportional hazards? <a href="https://www.jonathandroth.com/assets/files/LogUniqueHOD0_Draft_Accepted.pdf#page=25.45">Roth recommends Quasi-poisson</a> See section 5.2, “A DiD setting: Sequeira (2016)”</p>
<p>We re-ran the model as a Poisson model. Results were qualitatively similar at a glance.</p>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Table 2 with Poisson ------</span></span>
<span></span>
<span><span class="va">mod1p</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feglm.html">fepois</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod2p</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feglm.html">fepois</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">female</span><span class="op">)</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod3p</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feglm.html">fepois</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel_ass</span> <span class="op">+</span> <span class="va">dummy_euro_4_ass</span> <span class="op">+</span> <span class="va">diesel_euro4_ass</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">dummy_car_unknown</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod4p</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feglm.html">fepois</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">vote_lega_2018</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">no_answer_2018</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod5p</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feglm.html">fepois</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">vote_lega_regional</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">no_answer_regional</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod6p</span> <span class="op">=</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feglm.html">fepois</a></span><span class="op">(</span><span class="va">vote_lega_euro</span> <span class="op">~</span> <span class="va">dummy_diesel</span> <span class="op">+</span> <span class="va">dummy_euro_4</span> <span class="op">+</span> <span class="va">dummy_diesel</span><span class="op">*</span><span class="va">dummy_euro_4</span></span>
<span>             <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">vote_lega_municipal</span> <span class="op">|</span> <span class="va">EDU1</span> <span class="op">+</span> <span class="va">EDU2</span> <span class="op">+</span> <span class="va">EDU3</span> <span class="op">+</span> <span class="va">EDU4</span> <span class="op">+</span> <span class="va">profile_gross_personal_eu</span>, </span>
<span>             data <span class="op">=</span> <span class="va">dts</span><span class="op">[</span><span class="va">target</span><span class="op">!=</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="va">target</span><span class="op">!=</span><span class="fl">4</span> <span class="op">&amp;</span> <span class="va">no_answer_euro</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">no_answer_municipal</span><span class="op">==</span><span class="fl">0</span>, <span class="op">]</span>,</span>
<span>             vcov <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save</span></span>
<span><span class="fu"><a href="https://lrberge.github.io/fixest/reference/etable.html">etable</a></span><span class="op">(</span><span class="va">mod1p</span>,<span class="va">mod2p</span>,<span class="va">mod3p</span>,<span class="va">mod4p</span>,<span class="va">mod5p</span>,<span class="va">mod6p</span>,</span>
<span>       keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dummy_diesel"</span>, <span class="st">"dummy_euro_4"</span>, <span class="st">"diesel_euro4"</span><span class="op">)</span>, </span>
<span>  digits<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"poisson, raw coefs"</span>, format <span class="op">=</span> <span class="st">"html"</span>, escape <span class="op">=</span> <span class="cn">FALSE</span>, digits<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>      <span class="va">kable_styling</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>poisson, raw coefs</caption>
 <thead><tr>
<th style="text-align:left;">  </th>
   <th style="text-align:left;"> mod1p </th>
   <th style="text-align:left;"> mod2p </th>
   <th style="text-align:left;"> mod3p </th>
   <th style="text-align:left;"> mod4p </th>
   <th style="text-align:left;"> mod5p </th>
   <th style="text-align:left;"> mod6p </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> Dependent Var.: </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
   <td style="text-align:left;"> vote_lega_euro </td>
  </tr>
<tr>
<td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_diesel </td>
   <td style="text-align:left;"> -0.411 (0.289) </td>
   <td style="text-align:left;"> -0.461. (0.271) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> -0.008 (0.197) </td>
   <td style="text-align:left;"> 0.109 (0.218) </td>
   <td style="text-align:left;"> 0.128 (0.307) </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_euro_4 </td>
   <td style="text-align:left;"> -0.189 (0.271) </td>
   <td style="text-align:left;"> -0.224 (0.248) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 0.026 (0.191) </td>
   <td style="text-align:left;"> 0.176 (0.183) </td>
   <td style="text-align:left;"> 0.002 (0.199) </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_diesel x dummy_euro_4 </td>
   <td style="text-align:left;"> 0.519 (0.379) </td>
   <td style="text-align:left;"> 0.712* (0.348) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 0.343 (0.259) </td>
   <td style="text-align:left;"> 0.245 (0.263) </td>
   <td style="text-align:left;"> 0.522 (0.322) </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_diesel_ass </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> -0.383 (0.256) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> dummy_euro_4_ass </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> -0.154 (0.253) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> diesel_euro4_ass </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 0.610. (0.344) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
<tr>
<td style="text-align:left;"> Fixed-Effects: </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> --------------- </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> -------------- </td>
   <td style="text-align:left;"> -------------- </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU1 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU2 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU3 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> EDU4 </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> profile_gross_personal_eu </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
  </tr>
<tr>
<td style="text-align:left;"> ___________________________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> _______________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> ______________ </td>
   <td style="text-align:left;"> ______________ </td>
  </tr>
<tr>
<td style="text-align:left;"> S.E. type </td>
   <td style="text-align:left;"> IID </td>
   <td style="text-align:left;"> Heteroske.-rob. </td>
   <td style="text-align:left;"> Heterosk.-rob. </td>
   <td style="text-align:left;"> Heterosk.-rob. </td>
   <td style="text-align:left;"> Heterosk.-rob. </td>
   <td style="text-align:left;"> Heterosk.-rob. </td>
  </tr>
<tr>
<td style="text-align:left;"> Observations </td>
   <td style="text-align:left;"> 602 </td>
   <td style="text-align:left;"> 602 </td>
   <td style="text-align:left;"> 665 </td>
   <td style="text-align:left;"> 583 </td>
   <td style="text-align:left;"> 551 </td>
   <td style="text-align:left;"> 533 </td>
  </tr>
<tr>
<td style="text-align:left;"> Squared Cor. </td>
   <td style="text-align:left;"> 0.00499 </td>
   <td style="text-align:left;"> 0.14100 </td>
   <td style="text-align:left;"> 0.16530 </td>
   <td style="text-align:left;"> 0.45263 </td>
   <td style="text-align:left;"> 0.38159 </td>
   <td style="text-align:left;"> 0.43376 </td>
  </tr>
<tr>
<td style="text-align:left;"> Pseudo R2 </td>
   <td style="text-align:left;"> 0.00337 </td>
   <td style="text-align:left;"> 0.08354 </td>
   <td style="text-align:left;"> 0.09005 </td>
   <td style="text-align:left;"> 0.29877 </td>
   <td style="text-align:left;"> 0.30633 </td>
   <td style="text-align:left;"> 0.26270 </td>
  </tr>
<tr>
<td style="text-align:left;"> BIC </td>
   <td style="text-align:left;"> 731.70 </td>
   <td style="text-align:left;"> 809.31 </td>
   <td style="text-align:left;"> 924.67 </td>
   <td style="text-align:left;"> 640.01 </td>
   <td style="text-align:left;"> 614.81 </td>
   <td style="text-align:left;"> 623.33 </td>
  </tr>
</tbody>
</table>
</div>
</div>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-chen_roth" class="csl-entry" role="doc-biblioentry">
Chen, Jiafeng, and Jonathan Roth. 2023. <span>“<span class="nocase">Logs with Zeros? Some Problems and Solutions*</span>.”</span> <em>The Quarterly Journal of Economics</em> 139 (2): 891–936. <a href="https://doi.org/10.1093/qje/qjad054">https://doi.org/10.1093/qje/qjad054</a>.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../chapters/computational_replication_checking.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Computational replication</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/writeup.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">A comment on Colantone et al.&nbsp;(2024, APSR)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb9" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Robustness checking and exploration {#robustness}</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: input_data</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Input cleaned data"</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidyverse, data.table, haven, glue, Hmisc, here, fixest, knitr, kableExtra, DT)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># read in dta file, Clara likes working with data table format</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">=</span> <span class="fu">read_dta</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"OriginalFiles"</span>, <span class="st">"Survey.dta"</span>))</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>dts <span class="ot">=</span> <span class="fu">read_dta</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"OriginalFiles"</span>, <span class="st">"Replication_Dataset.dta"</span>)) <span class="sc">%&gt;%</span> <span class="fu">data.table</span>()</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>dts <span class="ot">&lt;-</span> dts <span class="sc">%&gt;%</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">euro_class =</span> class<span class="dv">-1</span>,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">diesel =</span> fuel <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>We proposed a range of robustness tests. We were able to do a subset of these.</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rates of voting for each car group split: implication for identification</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>We  present a simple comparison of the Lega voting rates, voting changes, and other outcomes by each car-ownership group. The table below captures the 'main effect' the authors investigate. Euro 4 *diesel* fuel owners supported Lega more in the post-policy European elections, relative to Euro 4 *gas* owners. This also held for *Euro 4* diesel fuel owners relative to diesel fuel owners in other classes. However, for these same comparisons in an earlier (2018) election, the rates of voting for Lega were fairly similar, or even went in the opposite direction. </span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>The second table below enables sorting by diesel or class, to aid this consideration.</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>Furthermore, the base rates of Lega voting were similar in order-of-magnitude, suggesting that the choice of functional form might not matter so much (see discussion below).</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming dts is your data frame</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>dts <span class="sc">%&gt;%</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(euro_class, diesel) <span class="sc">%&gt;%</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">mn_lega_18 =</span> <span class="cf">if</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="fu">mean</span>(vote_lega_2018, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="cf">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">mn_lega_euro =</span> <span class="cf">if</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="fu">mean</span>(vote_lega_euro, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="cf">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(), <span class="co"># Count of observations</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span> <span class="co"># Drop grouping structure after summarization</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mn_lega_18)) <span class="sc">%&gt;%</span> <span class="co"># Remove groups with less than 10 observations</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Voting for Lega by Euro category and fuel tyle"</span>, <span class="at">format =</span> <span class="st">"html"</span>, <span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">digits=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>      kable_styling</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>dts <span class="sc">%&gt;%</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(euro_class, diesel) <span class="sc">%&gt;%</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">mn_lega_18 =</span> <span class="cf">if</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="fu">mean</span>(vote_lega_2018, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="cf">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">mn_lega_euro =</span> <span class="cf">if</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="fu">mean</span>(vote_lega_euro, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="cf">else</span> <span class="cn">NA</span>,  <span class="co"># Calculate mean if group size &gt;= 10</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(), <span class="co"># Count of observations</span></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span> <span class="co"># Drop grouping structure after summarization</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mn_lega_18)) <span class="sc">%&gt;%</span> <span class="co"># Remove groups with less than 10 observations</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(., <span class="dv">3</span>))) <span class="sc">%&gt;%</span>  <span class="co"># Round all numeric columns to 3 decimal places</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a><span class="fu">## Main results (table 2, recoded)</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: recode_table_2</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Table 2 recoded"</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 2 ------</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep the same choices made by the authors</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fixest)</span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">=</span> <span class="fu">feols</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4, </span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span>, ])</span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>mod2 <span class="ot">=</span> <span class="fu">feols</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> <span class="fu">as.factor</span>(female) <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a>mod3 <span class="ot">=</span> <span class="fu">feols</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel_ass <span class="sc">+</span> dummy_euro_4_ass <span class="sc">+</span> diesel_euro4_ass</span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> dummy_car_unknown <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>mod4 <span class="ot">=</span> <span class="fu">feols</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> vote_lega_2018 <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> no_answer_2018<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>mod5 <span class="ot">=</span> <span class="fu">feols</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> vote_lega_regional <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> no_answer_regional<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a>mod6 <span class="ot">=</span> <span class="fu">feols</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> vote_lega_municipal <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> no_answer_municipal<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Save</span></span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(mod1,mod2,mod3,mod4,mod5,mod6,</span>
<span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a>       <span class="at">keep =</span> <span class="fu">c</span>(<span class="st">"dummy_diesel"</span>, <span class="st">"dummy_euro_4"</span>, <span class="st">"diesel_euro4"</span>),</span>
<span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>, <span class="at">escape =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a>      kable_styling</span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a><span class="fu">## Alternate control/treatment splits</span></span>
<span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a>I don't think we did this, but we could do. This seems to me like an important robustness check</span>
<span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a><span class="fu">## Functional form {#functional}</span></span>
<span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a>The main outcome variable is binary 0/1. The authors consider linear models throughout. I (David Reinstein) believe their identification implicitly depends on</span>
<span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>each of the unmeasured underlying characteristics (picked up by the proxy control in 'difference') each being associated with the voting outcome linearly on 'percentage point voting for Lega' ... so the each the</span>
<span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a>But the treated and groups might have started from a different baseline level of voting for Lega -- (however, as we saw above, these were order-of-magnitude similar).</span>
<span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-137"><a href="#cb9-137" aria-hidden="true" tabindex="-1"></a>If the true model is nonlinear (e.g., proportional, or with ceiling effects), the results here may be misleading. E.g., suppose the true effect of the policy on voting was the same for each car-ownership group as a percentage of the initial vote. Inappropriately estimating a linear model would find a substantial 'difference in difference' between these groups, even though the effect did not interact with car ownership itself.</span>
<span id="cb9-138"><a href="#cb9-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a>@chen_roth cite Wooldridge 2023 </span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; An alternative identifying assumption is to impose that, in the absence of treatment, the percentage changes in the mean would have been the same for the treated and control group. As in Wooldridge (2023), this can be formalized using a “ratio” version of the parallel trends assumption,</span></span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a><span class="sc">\[</span></span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a>\frac{E<span class="co">[</span><span class="ot">Y_{it}(0) | D_i = 1, Post_t = 1</span><span class="co">]</span>}{E<span class="co">[</span><span class="ot">Y_{it}(0) | D_i = 1, Post_t = 0</span><span class="co">]</span>} = \frac{E<span class="co">[</span><span class="ot">Y_{it}(0) | D_i = 0, Post_t = 1</span><span class="co">]</span>}{E<span class="co">[</span><span class="ot">Y_{it}(0) | D_i = 0, Post_t = 0</span><span class="co">]</span>}</span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a><span class="sc">\]</span></span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a>We probably don't have time to test for proportional trends (as well as limited data for a powerful test). But it seems an equally-plausible model off-the cuff. Chen and Roth offer an estimation strategy </span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-149"><a href="#cb9-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-150"><a href="#cb9-150" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Conveniently, this estimate can also be obtained using Poisson QMLE to estimate  $Y_{it} = \exp(\beta_0 + D_i \times Post_t \beta_1 + D_i\beta_2 + Post_t\beta_3)\epsilon_{it}$ </span></span>
<span id="cb9-151"><a href="#cb9-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-152"><a href="#cb9-152" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; and then computing $\hat{\theta}_{ATT\%} = \exp(\hat{\beta}_1) - 1 = -0.82$ as shown in column (1) of Table 6.</span></span>
<span id="cb9-153"><a href="#cb9-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-154"><a href="#cb9-154" aria-hidden="true" tabindex="-1"></a>Estimate this as a logit model? Other specifications like proportional hazards? <span class="co">[</span><span class="ot">Roth recommends Quasi-poisson</span><span class="co">](https://www.jonathandroth.com/assets/files/LogUniqueHOD0_Draft_Accepted.pdf#page=25.45)</span> See section 5.2, "A DiD setting: Sequeira (2016)"</span>
<span id="cb9-155"><a href="#cb9-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-156"><a href="#cb9-156" aria-hidden="true" tabindex="-1"></a>We re-ran the model as a Poisson model. Results were qualitatively similar at a glance. </span>
<span id="cb9-157"><a href="#cb9-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-158"><a href="#cb9-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-161"><a href="#cb9-161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb9-162"><a href="#cb9-162" aria-hidden="true" tabindex="-1"></a><span class="co"># Table 2 with Poisson ------</span></span>
<span id="cb9-163"><a href="#cb9-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-164"><a href="#cb9-164" aria-hidden="true" tabindex="-1"></a>mod1p <span class="ot">=</span> <span class="fu">fepois</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4, </span>
<span id="cb9-165"><a href="#cb9-165" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span>, ])</span>
<span id="cb9-166"><a href="#cb9-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-167"><a href="#cb9-167" aria-hidden="true" tabindex="-1"></a>mod2p <span class="ot">=</span> <span class="fu">fepois</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-168"><a href="#cb9-168" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> <span class="fu">as.factor</span>(female) <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-169"><a href="#cb9-169" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-170"><a href="#cb9-170" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-171"><a href="#cb9-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-172"><a href="#cb9-172" aria-hidden="true" tabindex="-1"></a>mod3p <span class="ot">=</span> <span class="fu">fepois</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel_ass <span class="sc">+</span> dummy_euro_4_ass <span class="sc">+</span> diesel_euro4_ass</span>
<span id="cb9-173"><a href="#cb9-173" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> dummy_car_unknown <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-174"><a href="#cb9-174" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-175"><a href="#cb9-175" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-176"><a href="#cb9-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-177"><a href="#cb9-177" aria-hidden="true" tabindex="-1"></a>mod4p <span class="ot">=</span> <span class="fu">fepois</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-178"><a href="#cb9-178" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> vote_lega_2018 <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-179"><a href="#cb9-179" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> no_answer_2018<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-180"><a href="#cb9-180" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-181"><a href="#cb9-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-182"><a href="#cb9-182" aria-hidden="true" tabindex="-1"></a>mod5p <span class="ot">=</span> <span class="fu">fepois</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-183"><a href="#cb9-183" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> vote_lega_regional <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-184"><a href="#cb9-184" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> no_answer_regional<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-185"><a href="#cb9-185" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-186"><a href="#cb9-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-187"><a href="#cb9-187" aria-hidden="true" tabindex="-1"></a>mod6p <span class="ot">=</span> <span class="fu">fepois</span>(vote_lega_euro <span class="sc">~</span> dummy_diesel <span class="sc">+</span> dummy_euro_4 <span class="sc">+</span> dummy_diesel<span class="sc">*</span>dummy_euro_4</span>
<span id="cb9-188"><a href="#cb9-188" aria-hidden="true" tabindex="-1"></a>             <span class="sc">+</span> age <span class="sc">+</span> female <span class="sc">+</span> vote_lega_municipal <span class="sc">|</span> EDU1 <span class="sc">+</span> EDU2 <span class="sc">+</span> EDU3 <span class="sc">+</span> EDU4 <span class="sc">+</span> profile_gross_personal_eu, </span>
<span id="cb9-189"><a href="#cb9-189" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> dts[target<span class="sc">!=</span><span class="dv">3</span> <span class="sc">&amp;</span> target<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> no_answer_euro<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> no_answer_municipal<span class="sc">==</span><span class="dv">0</span>, ],</span>
<span id="cb9-190"><a href="#cb9-190" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="st">"hetero"</span>)</span>
<span id="cb9-191"><a href="#cb9-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-192"><a href="#cb9-192" aria-hidden="true" tabindex="-1"></a><span class="co"># Save</span></span>
<span id="cb9-193"><a href="#cb9-193" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(mod1p,mod2p,mod3p,mod4p,mod5p,mod6p,</span>
<span id="cb9-194"><a href="#cb9-194" aria-hidden="true" tabindex="-1"></a>       <span class="at">keep =</span> <span class="fu">c</span>(<span class="st">"dummy_diesel"</span>, <span class="st">"dummy_euro_4"</span>, <span class="st">"diesel_euro4"</span>), </span>
<span id="cb9-195"><a href="#cb9-195" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-196"><a href="#cb9-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"poisson, raw coefs"</span>, <span class="at">format =</span> <span class="st">"html"</span>, <span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">digits=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-197"><a href="#cb9-197" aria-hidden="true" tabindex="-1"></a>      kable_styling</span>
<span id="cb9-198"><a href="#cb9-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-199"><a href="#cb9-199" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>